<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>é’©å­ç³»ç»Ÿ - OpenClaw æ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css?v=3">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <span class="logo-icon">ğŸ¦</span>
                <span class="logo-text">OpenClaw ä¸­æ–‡æ–‡æ¡£</span>
            </a>
            <button class="nav-toggle" onclick="toggleNav()">â˜°</button>
            <div class="nav-links" id="navLinks">

            <div class="nav-section">
                <span class="nav-section-title">å…¥é—¨æŒ‡å—</span>
                <a href="start/getting-started.html">å¿«é€Ÿå…¥é—¨</a>
                <a href="start/wizard.html">å‘å¯¼</a>
                <a href="start/pairing.html">é…å¯¹</a>
                <a href="start/setup.html">è®¾ç½®</a>
                <a href="start/openclaw.html">OpenClaw åŠ©æ‰‹</a>
                <a href="start/hubs.html">æ–‡æ¡£ä¸­å¿ƒ</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">ç½‘å…³é…ç½®</span>
                <a href="gateway/configuration.html">é…ç½®</a>
                <a href="gateway/configuration-examples.html">é…ç½®ç¤ºä¾‹</a>
                <a href="gateway/security.html">å®‰å…¨</a>
                <a href="gateway/remote.html">è¿œç¨‹è®¿é—®</a>
                <a href="gateway/tailscale.html">Tailscale</a>
                <a href="gateway/multiple-gateways.html">å¤šç½‘å…³</a>
                <a href="gateway/discovery.html">å‘ç°æœºåˆ¶</a>
                <a href="environment.html">ç¯å¢ƒå˜é‡</a>
                <a href="logging.html">æ—¥å¿—é…ç½®</a>
                <a href="network.html">ç½‘ç»œé…ç½®</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">æ¶ˆæ¯æ¸ é“</span>
                <a href="channels/whatsapp.html">WhatsApp</a>
                <a href="channels/telegram.html">Telegram</a>
                <a href="channels/discord.html">Discord</a>
                <a href="channels/mattermost.html">Mattermost</a>
                <a href="channels/imessage.html">iMessage</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">Web ç•Œé¢</span>
                <a href="web/webchat.html">WebChat</a>
                <a href="web/control-ui.html">æ§åˆ¶ç•Œé¢</a>
                <a href="web/dashboard.html">æ§åˆ¶å°</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">æ ¸å¿ƒæ¦‚å¿µ</span>
                <a href="concepts/streaming.html">æµå¼ä¼ è¾“</a>
                <a href="concepts/groups.html">ç¾¤ç»„</a>
                <a href="concepts/group-messages.html">ç¾¤ç»„æ¶ˆæ¯</a>
                <a href="concepts/multi-agent.html">å¤šä»£ç†è·¯ç”±</a>
                <a href="concepts/session.html">ä¼šè¯</a>
                <a href="broadcast-groups.html">å¹¿æ’­ç¾¤ç»„</a>
                <a href="multi-agent-sandbox-tools.html">å¤šä»£ç†æ²™ç›’</a>
                <a href="date-time.html">æ—¥æœŸæ—¶é—´</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">è‡ªåŠ¨åŒ–</span>
                <a href="automation/cron-jobs.html">å®šæ—¶ä»»åŠ¡</a>
                <a href="automation/webhook.html">Webhooks</a>
                <a href="automation/gmail-pubsub.html">Gmail Pub/Sub</a>
                <a href="hooks.html">é’©å­ç³»ç»Ÿ</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å·¥å…·ä¸æŠ€èƒ½</span>
                <a href="tools/slash-commands.html">æ–œæ å‘½ä»¤</a>
                <a href="tools/skills.html">æŠ€èƒ½</a>
                <a href="tools/skills-config.html">æŠ€èƒ½é…ç½®</a>
                <a href="tools/web.html">Web å·¥å…·</a>
                <a href="brave-search.html">Brave æœç´¢</a>
                <a href="perplexity.html">Perplexity</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å®‰è£…ä¸å¹³å°</span>
                <a href="install/updating.html">æ›´æ–°</a>
                <a href="install/nix.html">Nix æ¨¡å¼</a>
                <a href="platforms/macos.html">macOS</a>
                <a href="platforms/ios.html">iOS</a>
                <a href="platforms/android.html">Android</a>
                <a href="platforms/windows.html">Windows (WSL2)</a>
                <a href="platforms/linux.html">Linux</a>
                <a href="northflank.html">Northflank éƒ¨ç½²</a>
                <a href="bedrock.html">AWS Bedrock</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">èŠ‚ç‚¹ä¸åª’ä½“</span>
                <a href="nodes/index.html">èŠ‚ç‚¹</a>
                <a href="nodes/images.html">å›¾ç‰‡</a>
                <a href="nodes/audio.html">éŸ³é¢‘</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">CLI ä¸è°ƒè¯•</span>
                <a href="cli/index.html">CLI å‚è€ƒ</a>
                <a href="debug/node-issue.html">Node é—®é¢˜</a>
                <a href="diagnostics/flags.html">è¯Šæ–­æ ‡å¿—</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å®éªŒæ€§</span>
                <a href="experiments/onboarding-config-protocol.html">é…ç½®åè®®</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å…¶ä»–</span>
                <a href="help.html">å¸®åŠ©</a>
            </div>

            </div>
        </div>
    </nav>

    <div class="overlay" onclick="toggleNav()"></div>

    <main class="main-content">
        <div class="content">
            <h1>é’©å­ç³»ç»Ÿ</h1>
<h1>é’©å­</h1>
<p>é’©å­æä¾›äº†ä¸€ä¸ªå¯æ‰©å±•çš„äº‹ä»¶é©±åŠ¨ç³»ç»Ÿï¼Œç”¨äºè‡ªåŠ¨åŒ–å“åº” Agent å‘½ä»¤å’Œäº‹ä»¶çš„æ“ä½œã€‚é’©å­è‡ªåŠ¨ä»ç›®å½•å‘ç°ï¼Œå¯ä»¥é€šè¿‡ CLI å‘½ä»¤ç®¡ç†ï¼Œç±»ä¼¼äº OpenClaw ä¸­æŠ€èƒ½çš„å·¥ä½œæ–¹å¼ã€‚</p>
<h2>å¿«é€Ÿä¸Šæ‰‹</h2>
<p>é’©å­æ˜¯å½“æŸäº›äº‹æƒ…å‘ç”Ÿæ—¶è¿è¡Œçš„å°è„šæœ¬ã€‚æœ‰ä¸¤ç§ï¼š</p>
<ul>
<li><strong>é’©å­</strong>ï¼ˆæœ¬é¡µï¼‰ï¼šå½“ Agent äº‹ä»¶è§¦å‘æ—¶åœ¨ Gateway å†…éƒ¨è¿è¡Œï¼Œå¦‚ <code>/new</code>ã€<code>/reset</code>ã€<code>/stop</code> æˆ–ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ã€‚</li>
<li><strong>Webhooks</strong>ï¼šè®©å…¶ä»–ç³»ç»Ÿè§¦å‘ OpenClaw å·¥ä½œçš„å¤–éƒ¨ HTTP webhookã€‚å‚è§ <a href="automation/webhook.html">Webhook é’©å­</a> æˆ–ä½¿ç”¨ <code>openclaw webhooks</code> è·å– Gmail åŠ©æ‰‹å‘½ä»¤ã€‚</li>
</ul>
<p>é’©å­ä¹Ÿå¯ä»¥æ†ç»‘åœ¨æ’ä»¶å†…ï¼›å‚è§ <a href="plugin.html">æ’ä»¶</a>ã€‚</p>
<p>å¸¸è§ç”¨é€”ï¼š</p>
<ul>
<li>é‡ç½®ä¼šè¯æ—¶ä¿å­˜è®°å¿†å¿«ç…§</li>
<li>ä¿ç•™å‘½ä»¤å®¡è®¡æ—¥å¿—ç”¨äºæ•…éšœæ’é™¤æˆ–åˆè§„</li>
<li>ä¼šè¯å¼€å§‹æˆ–ç»“æŸæ—¶è§¦å‘åç»­è‡ªåŠ¨åŒ–</li>
<li>äº‹ä»¶è§¦å‘æ—¶å‘ Agent å·¥ä½œç©ºé—´å†™å…¥æ–‡ä»¶æˆ–è°ƒç”¨å¤–éƒ¨ API</li>
</ul>
<p>å¦‚æœä½ èƒ½å†™ä¸€ä¸ªå° TypeScript å‡½æ•°ï¼Œä½ å°±èƒ½å†™ä¸€ä¸ªé’©å­ã€‚é’©å­è‡ªåŠ¨å‘ç°ï¼Œä½ å¯ä»¥é€šè¿‡ CLI å¯ç”¨æˆ–ç¦ç”¨å®ƒä»¬ã€‚</p>
<h2>æ¦‚è¿°</h2>
<p>é’©å­ç³»ç»Ÿå…è®¸ä½ ï¼š</p>
<ul>
<li>å‘å‡º <code>/new</code> æ—¶ä¿å­˜ä¼šè¯ä¸Šä¸‹æ–‡åˆ°è®°å¿†</li>
<li>è®°å½•æ‰€æœ‰å‘½ä»¤ç”¨äºå®¡è®¡</li>
<li>åœ¨ Agent ç”Ÿå‘½å‘¨æœŸäº‹ä»¶ä¸Šè§¦å‘è‡ªå®šä¹‰è‡ªåŠ¨åŒ–</li>
<li>æ— éœ€ä¿®æ”¹æ ¸å¿ƒä»£ç å³å¯æ‰©å±• OpenClaw çš„è¡Œä¸º</li>
</ul>
<h2>å…¥é—¨</h2>
<h3>æ†ç»‘é’©å­</h3>
<p>OpenClaw é™„å¸¦å››ä¸ªè‡ªåŠ¨å‘ç°çš„æ†ç»‘é’©å­ï¼š</p>
<ul>
<li><strong>ğŸ’¾ session-memory</strong>ï¼šå‘ Agent å·¥ä½œç©ºé—´ä¿å­˜ä¼šè¯ä¸Šä¸‹æ–‡ï¼ˆé»˜è®¤ <code>~/.openclaw/workspace/memory/</code>ï¼‰å½“ä½ å‘å‡º <code>/new</code> æ—¶</li>
<li><strong>ğŸ“ command-logger</strong>ï¼šè®°å½•æ‰€æœ‰å‘½ä»¤äº‹ä»¶åˆ° <code>~/.openclaw/logs/commands.log</code></li>
<li><strong>ğŸš€ boot-md</strong>ï¼šGateway å¯åŠ¨æ—¶è¿è¡Œ <code>BOOT.md</code>ï¼ˆéœ€è¦å¯ç”¨å†…éƒ¨é’©å­ï¼‰</li>
<li><strong>ğŸ˜ˆ soul-evil</strong>ï¼šåœ¨æ¸…é™¤çª—å£æœŸé—´æˆ–éšæœºæœºä¼šå°†æ³¨å…¥çš„ <code>SOUL.md</code> å†…å®¹æ›¿æ¢ä¸º <code>SOUL_EVIL.md</code></li>
</ul>
<p>åˆ—å‡ºå¯ç”¨é’©å­ï¼š</p>
<pre><code class="language-bash">openclaw hooks list
</code></pre>
<p>å¯ç”¨é’©å­ï¼š</p>
<pre><code class="language-bash">openclaw hooks enable session-memory
</code></pre>
<p>æ£€æŸ¥é’©å­çŠ¶æ€ï¼š</p>
<pre><code class="language-bash">openclaw hooks check
</code></pre>
<p>è·å–è¯¦ç»†ä¿¡æ¯ï¼š</p>
<pre><code class="language-bash">openclaw hooks info session-memory
</code></pre>
<h3>å¼•å¯¼</h3>
<p>åœ¨å¼•å¯¼æœŸé—´ï¼ˆ<code>openclaw onboard</code>ï¼‰ï¼Œä½ ä¼šè¢«æç¤ºå¯ç”¨æ¨èçš„é’©å­ã€‚å‘å¯¼è‡ªåŠ¨å‘ç°åˆæ ¼çš„é’©å­å¹¶å‘ˆç°ä¾›é€‰æ‹©ã€‚</p>
<h2>é’©å­å‘ç°</h2>
<p>é’©å­è‡ªåŠ¨ä»ä¸‰ä¸ªç›®å½•å‘ç°ï¼ˆæŒ‰ä¼˜å…ˆçº§é¡ºåºï¼‰ï¼š</p>
<ol>
<li><strong>å·¥ä½œç©ºé—´é’©å­</strong>ï¼š<code>&lt;workspace&gt;/hooks/</code>ï¼ˆæ¯ä¸ª Agentï¼Œæœ€é«˜ä¼˜å…ˆçº§ï¼‰</li>
<li><strong>æ‰˜ç®¡é’©å­</strong>ï¼š<code>~/.openclaw/hooks/</code>ï¼ˆç”¨æˆ·å®‰è£…ï¼Œè·¨å·¥ä½œç©ºé—´å…±äº«ï¼‰</li>
<li><strong>æ†ç»‘é’©å­</strong>ï¼š<code>&lt;openclaw&gt;/dist/hooks/bundled/</code>ï¼ˆéš OpenClaw ä¸€èµ·å‘å¸ƒï¼‰</li>
</ol>
<p>æ‰˜ç®¡é’©å­ç›®å½•å¯ä»¥æ˜¯<strong>å•ä¸ªé’©å­</strong>æˆ–<strong>é’©å­åŒ…</strong>ï¼ˆåŒ…ç›®å½•ï¼‰ã€‚</p>
<p>æ¯ä¸ªé’©å­æ˜¯ä¸€ä¸ªåŒ…å«ä»¥ä¸‹å†…å®¹çš„ç›®å½•ï¼š</p>
<pre><code>my-hook/
â”œâ”€â”€ HOOK.md          # å…ƒæ•°æ® + æ–‡æ¡£
â””â”€â”€ handler.ts       # å¤„ç†ç¨‹åºå®ç°
</code></pre>
<h2>é’©å­åŒ…ï¼ˆnpm/å½’æ¡£ï¼‰</h2>
<p>é’©å­åŒ…æ˜¯é€šè¿‡ <code>package.json</code> ä¸­çš„ <code>openclaw.hooks</code> å¯¼å‡ºä¸€ä¸ªæˆ–å¤šä¸ªé’©å­çš„æ ‡å‡† npm åŒ…ã€‚ç”¨ä»¥ä¸‹å‘½ä»¤å®‰è£…ï¼š</p>
<pre><code class="language-bash">openclaw hooks install &lt;path-or-spec&gt;
</code></pre>
<p>ç¤ºä¾‹ <code>package.json</code>ï¼š</p>
<pre><code class="language-json">{
  &quot;name&quot;: &quot;@acme/my-hooks&quot;,
  &quot;version&quot;: &quot;0.1.0&quot;,
  &quot;openclaw&quot;: {
    &quot;hooks&quot;: [&quot;./hooks/my-hook&quot;, &quot;./hooks/other-hook&quot;]
  }
}
</code></pre>
<p>æ¯ä¸ªæ¡ç›®æŒ‡å‘åŒ…å« <code>HOOK.md</code> å’Œ <code>handler.ts</code>ï¼ˆæˆ– <code>index.ts</code>ï¼‰çš„é’©å­ç›®å½•ã€‚<br>é’©å­åŒ…å¯ä»¥é™„å¸¦ä¾èµ–ï¼›å®ƒä»¬å°†å®‰è£…åœ¨ <code>~/.openclaw/hooks/&lt;id&gt;</code> ä¸‹ã€‚</p>
<h2>é’©å­ç»“æ„</h2>
<h3>HOOK.md æ ¼å¼</h3>
<p><code>HOOK.md</code> æ–‡ä»¶åŒ…å« YAML frontmatter ä¸­çš„å…ƒæ•°æ®åŠ ä¸Š Markdown æ–‡æ¡£ï¼š</p>
<pre><code class="language-markdown">---
name: my-hook
description: &quot;è¿™ä¸ªé’©å­çš„ç®€çŸ­æè¿°&quot;
homepage: https://docs.openclaw.ai/hooks#my-hook
metadata: {&quot;openclaw&quot;:{&quot;emoji&quot;:&quot;ğŸ”—&quot;,&quot;events&quot;:[&quot;command:new&quot;],&quot;requires&quot;:{&quot;bins&quot;:[&quot;node&quot;]}}}
---

# My Hook

è¯¦ç»†æ–‡æ¡£æ”¾åœ¨è¿™é‡Œ...

## å®ƒåšä»€ä¹ˆ

- ç›‘å¬ `/new` å‘½ä»¤
- æ‰§è¡ŒæŸäº›æ“ä½œ
- è®°å½•ç»“æœ

## è¦æ±‚

- å¿…é¡»å®‰è£… Node.js

## é…ç½®

æ— éœ€é…ç½®ã€‚
</code></pre>
<h3>å…ƒæ•°æ®å­—æ®µ</h3>
<p><code>metadata.openclaw</code> å¯¹è±¡æ”¯æŒï¼š</p>
<ul>
<li><strong><code>emoji</code></strong>ï¼šCLI æ˜¾ç¤ºçš„è¡¨æƒ…ç¬¦å·ï¼ˆä¾‹å¦‚ <code>&quot;ğŸ’¾&quot;</code>ï¼‰</li>
<li><strong><code>events</code></strong>ï¼šç›‘å¬çš„äº‹ä»¶æ•°ç»„ï¼ˆä¾‹å¦‚ <code>[&quot;command:new&quot;, &quot;command:reset&quot;]</code>ï¼‰</li>
<li><strong><code>export</code></strong>ï¼šä½¿ç”¨çš„å‘½åå¯¼å‡ºï¼ˆé»˜è®¤ä¸º <code>&quot;default&quot;</code>ï¼‰</li>
<li><strong><code>homepage</code></strong>ï¼šæ–‡æ¡£ URL</li>
<li><strong><code>requires</code></strong>ï¼šå¯é€‰è¦æ±‚<ul>
<li><strong><code>bins</code></strong>ï¼šPATH ä¸Šéœ€è¦çš„äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆä¾‹å¦‚ <code>[&quot;git&quot;, &quot;node&quot;]</code>ï¼‰</li>
<li><strong><code>anyBins</code></strong>ï¼šè¿™äº›äºŒè¿›åˆ¶æ–‡ä»¶ä¸­å¿…é¡»è‡³å°‘å­˜åœ¨ä¸€ä¸ª</li>
<li><strong><code>env</code></strong>ï¼šéœ€è¦çš„ç¯å¢ƒå˜é‡</li>
<li><strong><code>config</code></strong>ï¼šéœ€è¦çš„é…ç½®è·¯å¾„ï¼ˆä¾‹å¦‚ <code>[&quot;workspace.dir&quot;]</code>ï¼‰</li>
<li><strong><code>os</code></strong>ï¼šéœ€è¦çš„å¹³å°ï¼ˆä¾‹å¦‚ <code>[&quot;darwin&quot;, &quot;linux&quot;]</code>ï¼‰</li>
</ul>
</li>
<li><strong><code>always</code></strong>ï¼šç»•è¿‡èµ„æ ¼æ£€æŸ¥ï¼ˆå¸ƒå°”å€¼ï¼‰</li>
<li><strong><code>install</code></strong>ï¼šå®‰è£…æ–¹æ³•ï¼ˆå¯¹äºæ†ç»‘é’©å­ï¼š<code>[{&quot;id&quot;:&quot;bundled&quot;,&quot;kind&quot;:&quot;bundled&quot;}]</code>ï¼‰</li>
</ul>
<h3>å¤„ç†ç¨‹åºå®ç°</h3>
<p><code>handler.ts</code> æ–‡ä»¶å¯¼å‡ºä¸€ä¸ª <code>HookHandler</code> å‡½æ•°ï¼š</p>
<pre><code class="language-typescript">import type { HookHandler } from &#39;../../src/hooks/hooks.js&#39;;

const myHandler: HookHandler = async (event) =&gt; {
  // åªåœ¨ &#39;new&#39; å‘½ä»¤æ—¶è§¦å‘
  if (event.type !== &#39;command&#39; || event.action !== &#39;new&#39;) {
    return;
  }

  console.log(`[my-hook] New command triggered`);
  console.log(`  Session: ${event.sessionKey}`);
  console.log(`  Timestamp: ${event.timestamp.toISOString()}`);

  // ä½ çš„è‡ªå®šä¹‰é€»è¾‘åœ¨è¿™é‡Œ

  // å¯é€‰å‘é€æ¶ˆæ¯ç»™ç”¨æˆ·
  event.messages.push(&#39;âœ¨ My hook executed!&#39;);
};

export default myHandler;
</code></pre>
<h4>äº‹ä»¶ä¸Šä¸‹æ–‡</h4>
<p>æ¯ä¸ªäº‹ä»¶åŒ…æ‹¬ï¼š</p>
<pre><code class="language-typescript">{
  type: &#39;command&#39; | &#39;session&#39; | &#39;agent&#39; | &#39;gateway&#39;,
  action: string,              // ä¾‹å¦‚ &#39;new&#39;, &#39;reset&#39;, &#39;stop&#39;
  sessionKey: string,          // ä¼šè¯æ ‡è¯†ç¬¦
  timestamp: Date,             // äº‹ä»¶ä½•æ—¶å‘ç”Ÿ
  messages: string[],          // æ¨é€åˆ°è¿™é‡Œå‘é€ç»™ç”¨æˆ·
  context: {
    sessionEntry?: SessionEntry,
    sessionId?: string,
    sessionFile?: string,
    commandSource?: string,    // ä¾‹å¦‚ &#39;whatsapp&#39;, &#39;telegram&#39;
    senderId?: string,
    workspaceDir?: string,
    bootstrapFiles?: WorkspaceBootstrapFile[],
    cfg?: OpenClawConfig
  }
}
</code></pre>
<h2>äº‹ä»¶ç±»å‹</h2>
<h3>å‘½ä»¤äº‹ä»¶</h3>
<p>å‘å‡º Agent å‘½ä»¤æ—¶è§¦å‘ï¼š</p>
<ul>
<li><strong><code>command</code></strong>ï¼šæ‰€æœ‰å‘½ä»¤äº‹ä»¶ï¼ˆé€šç”¨ç›‘å¬å™¨ï¼‰</li>
<li><strong><code>command:new</code></strong>ï¼šå‘å‡º <code>/new</code> å‘½ä»¤æ—¶</li>
<li><strong><code>command:reset</code></strong>ï¼šå‘å‡º <code>/reset</code> å‘½ä»¤æ—¶</li>
<li><strong><code>command:stop</code></strong>ï¼šå‘å‡º <code>/stop</code> å‘½ä»¤æ—¶</li>
</ul>
<h3>Agent äº‹ä»¶</h3>
<ul>
<li><strong><code>agent:bootstrap</code></strong>ï¼šå·¥ä½œç©ºé—´å¼•å¯¼æ–‡ä»¶æ³¨å…¥ä¹‹å‰ï¼ˆé’©å­å¯ä»¥ä¿®æ”¹ <code>context.bootstrapFiles</code>ï¼‰</li>
</ul>
<h3>Gateway äº‹ä»¶</h3>
<p>Gateway å¯åŠ¨æ—¶è§¦å‘ï¼š</p>
<ul>
<li><strong><code>gateway:startup</code></strong>ï¼šé¢‘é“å¯åŠ¨å’Œé’©å­åŠ è½½å</li>
</ul>
<h3>å·¥å…·ç»“æœé’©å­ï¼ˆæ’ä»¶ APIï¼‰</h3>
<p>è¿™äº›é’©å­ä¸æ˜¯äº‹ä»¶æµç›‘å¬å™¨ï¼›å®ƒä»¬è®©æ’ä»¶åœ¨ OpenClaw æŒä¹…åŒ–ä¹‹å‰åŒæ­¥è°ƒæ•´å·¥å…·ç»“æœã€‚</p>
<ul>
<li><strong><code>tool_result_persist</code></strong>ï¼šè½¬æ¢å·¥å…·ç»“æœï¼Œåœ¨å†™å…¥ä¼šè¯è®°å½•ä¹‹å‰ã€‚å¿…é¡»æ˜¯åŒæ­¥çš„ï¼›è¿”å›æ›´æ–°çš„å·¥å…·ç»“æœè´Ÿè½½æˆ– <code>undefined</code> ä¿æŒä¸å˜ã€‚å‚è§ <a href="concepts/agent-loop.html">Agent å¾ªç¯</a>ã€‚</li>
</ul>
<h3>æœªæ¥äº‹ä»¶</h3>
<p>è®¡åˆ’çš„äº‹ä»¶ç±»å‹ï¼š</p>
<ul>
<li><strong><code>session:start</code></strong>ï¼šæ–°ä¼šè¯å¼€å§‹æ—¶</li>
<li><strong><code>session:end</code></strong>ï¼šä¼šè¯ç»“æŸæ—¶</li>
<li><strong><code>agent:error</code></strong>ï¼šAgent é‡åˆ°é”™è¯¯æ—¶</li>
<li><strong><code>message:sent</code></strong>ï¼šæ¶ˆæ¯å‘é€æ—¶</li>
<li><strong><code>message:received</code></strong>ï¼šæ¶ˆæ¯æ¥æ”¶æ—¶</li>
</ul>
<h2>åˆ›å»ºè‡ªå®šä¹‰é’©å­</h2>
<h3>1. é€‰æ‹©ä½ç½®</h3>
<ul>
<li><strong>å·¥ä½œç©ºé—´é’©å­</strong>ï¼ˆ<code>&lt;workspace&gt;/hooks/</code>ï¼‰ï¼šæ¯ä¸ª Agentï¼Œæœ€é«˜ä¼˜å…ˆçº§</li>
<li><strong>æ‰˜ç®¡é’©å­</strong>ï¼ˆ<code>~/.openclaw/hooks/</code>ï¼‰ï¼šè·¨å·¥ä½œç©ºé—´å…±äº«</li>
</ul>
<h3>2. åˆ›å»ºç›®å½•ç»“æ„</h3>
<pre><code class="language-bash">mkdir -p ~/.openclaw/hooks/my-hook
cd ~/.openclaw/hooks/my-hook
</code></pre>
<h3>3. åˆ›å»º HOOK.md</h3>
<pre><code class="language-markdown">---
name: my-hook
description: &quot;åšæœ‰ç”¨çš„äº‹æƒ…&quot;
metadata: {&quot;openclaw&quot;:{&quot;emoji&quot;:&quot;ğŸ¯&quot;,&quot;events&quot;:[&quot;command:new&quot;]}}
---

# My Custom Hook

è¿™ä¸ªé’©å­åœ¨ä½ å‘å‡º `/new` æ—¶åšæœ‰ç”¨çš„äº‹æƒ…ã€‚
</code></pre>
<h3>4. åˆ›å»º handler.ts</h3>
<pre><code class="language-typescript">import type { HookHandler } from &#39;../../src/hooks/hooks.js&#39;;

const handler: HookHandler = async (event) =&gt; {
  if (event.type !== &#39;command&#39; || event.action !== &#39;new&#39;) {
    return;
  }

  console.log(&#39;[my-hook] Running!&#39;);
  // ä½ çš„é€»è¾‘åœ¨è¿™é‡Œ
};

export default handler;
</code></pre>
<h3>5. å¯ç”¨å’Œæµ‹è¯•</h3>
<pre><code class="language-bash"># éªŒè¯é’©å­è¢«å‘ç°
openclaw hooks list

# å¯ç”¨å®ƒ
openclaw hooks enable my-hook

# é‡å¯ä½ çš„ Gateway è¿›ç¨‹ï¼ˆmacOS èœå•æ åº”ç”¨é‡å¯ï¼Œæˆ–é‡å¯ä½ çš„å¼€å‘è¿›ç¨‹ï¼‰

# è§¦å‘äº‹ä»¶
# é€šè¿‡ä½ çš„æ¶ˆæ¯æ¸ é“å‘é€ /new
</code></pre>
<h2>é…ç½®</h2>
<h3>æ–°é…ç½®æ ¼å¼ï¼ˆæ¨èï¼‰</h3>
<pre><code class="language-json">{
  &quot;hooks&quot;: {
    &quot;internal&quot;: {
      &quot;enabled&quot;: true,
      &quot;entries&quot;: {
        &quot;session-memory&quot;: { &quot;enabled&quot;: true },
        &quot;command-logger&quot;: { &quot;enabled&quot;: false }
      }
    }
  }
}
</code></pre>
<h3>æ¯ä¸ªé’©å­çš„é…ç½®</h3>
<p>é’©å­å¯ä»¥æœ‰è‡ªå®šä¹‰é…ç½®ï¼š</p>
<pre><code class="language-json">{
  &quot;hooks&quot;: {
    &quot;internal&quot;: {
      &quot;enabled&quot;: true,
      &quot;entries&quot;: {
        &quot;my-hook&quot;: {
          &quot;enabled&quot;: true,
          &quot;env&quot;: {
            &quot;MY_CUSTOM_VAR&quot;: &quot;value&quot;
          }
        }
      }
    }
  }
}
</code></pre>
<h3>é¢å¤–ç›®å½•</h3>
<p>ä»é¢å¤–ç›®å½•åŠ è½½é’©å­ï¼š</p>
<pre><code class="language-json">{
  &quot;hooks&quot;: {
    &quot;internal&quot;: {
      &quot;enabled&quot;: true,
      &quot;load&quot;: {
        &quot;extraDirs&quot;: [&quot;/path/to/more/hooks&quot;]
      }
    }
  }
}
</code></pre>
<h3>æ—§é…ç½®æ ¼å¼ï¼ˆä»æ”¯æŒï¼‰</h3>
<p>æ—§é…ç½®æ ¼å¼ä»å‘åå…¼å®¹ï¼š</p>
<pre><code class="language-json">{
  &quot;hooks&quot;: {
    &quot;internal&quot;: {
      &quot;enabled&quot;: true,
      &quot;handlers&quot;: [
        {
          &quot;event&quot;: &quot;command:new&quot;,
          &quot;module&quot;: &quot;./hooks/handlers/my-handler.ts&quot;,
          &quot;export&quot;: &quot;default&quot;
        }
      ]
    }
  }
}
</code></pre>
<p><strong>è¿ç§»</strong>ï¼šå¯¹æ–°é’©å­ä½¿ç”¨åŸºäºå‘ç°çš„æ–°ç³»ç»Ÿã€‚æ—§ç‰ˆå¤„ç†ç¨‹åºåœ¨åŸºäºç›®å½•çš„é’©å­ä¹‹ååŠ è½½ã€‚</p>
<h2>CLI å‘½ä»¤</h2>
<h3>åˆ—å‡ºé’©å­</h3>
<pre><code class="language-bash"># åˆ—å‡ºæ‰€æœ‰é’©å­
openclaw hooks list

# åªæ˜¾ç¤ºåˆæ ¼çš„é’©å­
openclaw hooks list --eligible

# è¯¦ç»†è¾“å‡ºï¼ˆæ˜¾ç¤ºç¼ºå¤±è¦æ±‚ï¼‰
openclaw hooks list --verbose

# JSON è¾“å‡º
openclaw hooks list --json
</code></pre>
<h3>é’©å­ä¿¡æ¯</h3>
<pre><code class="language-bash"># æ˜¾ç¤ºé’©å­çš„è¯¦ç»†ä¿¡æ¯
openclaw hooks info session-memory

# JSON è¾“å‡º
openclaw hooks info session-memory --json
</code></pre>
<h3>æ£€æŸ¥èµ„æ ¼</h3>
<pre><code class="language-bash"># æ˜¾ç¤ºèµ„æ ¼æ‘˜è¦
openclaw hooks check

# JSON è¾“å‡º
openclaw hooks check --json
</code></pre>
<h3>å¯ç”¨/ç¦ç”¨</h3>
<pre><code class="language-bash"># å¯ç”¨é’©å­
openclaw hooks enable session-memory

# ç¦ç”¨é’©å­
openclaw hooks disable command-logger
</code></pre>
<h2>æ†ç»‘é’©å­</h2>
<h3>session-memory</h3>
<p>å‘å‡º <code>/new</code> æ—¶ä¿å­˜ä¼šè¯ä¸Šä¸‹æ–‡åˆ°è®°å¿†ã€‚</p>
<p><strong>äº‹ä»¶</strong>ï¼š<code>command:new</code></p>
<p><strong>è¦æ±‚</strong>ï¼šå¿…é¡»é…ç½® <code>workspace.dir</code></p>
<p><strong>è¾“å‡º</strong>ï¼š<code>&lt;workspace&gt;/memory/YYYY-MM-DD-slug.md</code>ï¼ˆé»˜è®¤ä¸º <code>~/.openclaw/workspace</code>ï¼‰</p>
<p><strong>å®ƒåšä»€ä¹ˆ</strong>ï¼š</p>
<ol>
<li>ä½¿ç”¨é‡ç½®å‰çš„ä¼šè¯æ¡ç›®å®šä½æ­£ç¡®çš„è®°å½•</li>
<li>æå–æœ€å 15 è¡Œå¯¹è¯</li>
<li>ä½¿ç”¨ LLM ç”Ÿæˆæè¿°æ€§æ–‡ä»¶å slug</li>
<li>ä¿å­˜ä¼šè¯å…ƒæ•°æ®åˆ°æ—¥æœŸåŒ–çš„è®°å¿†æ–‡ä»¶</li>
</ol>
<p><strong>ç¤ºä¾‹è¾“å‡º</strong>ï¼š</p>
<pre><code class="language-markdown"># Session: 2026-01-16 14:30:00 UTC

- **Session Key**: agent:main:main
- **Session ID**: abc123def456
- **Source**: telegram
</code></pre>
<p><strong>æ–‡ä»¶åç¤ºä¾‹</strong>ï¼š</p>
<ul>
<li><code>2026-01-16-vendor-pitch.md</code></li>
<li><code>2026-01-16-api-design.md</code></li>
<li><code>2026-01-16-1430.md</code>ï¼ˆslug ç”Ÿæˆå¤±è´¥æ—¶çš„å›é€€æ—¶é—´æˆ³ï¼‰</li>
</ul>
<p><strong>å¯ç”¨</strong>ï¼š</p>
<pre><code class="language-bash">openclaw hooks enable session-memory
</code></pre>
<h3>command-logger</h3>
<p>è®°å½•æ‰€æœ‰å‘½ä»¤äº‹ä»¶åˆ°é›†ä¸­å®¡è®¡æ–‡ä»¶ã€‚</p>
<p><strong>äº‹ä»¶</strong>ï¼š<code>command</code></p>
<p><strong>è¦æ±‚</strong>ï¼šæ— </p>
<p><strong>è¾“å‡º</strong>ï¼š<code>~/.openclaw/logs/commands.log</code></p>
<p><strong>å®ƒåšä»€ä¹ˆ</strong>ï¼š</p>
<ol>
<li>æ•è·äº‹ä»¶è¯¦æƒ…ï¼ˆå‘½ä»¤æ“ä½œã€æ—¶é—´æˆ³ã€ä¼šè¯é”®ã€å‘é€è€… IDã€æ¥æºï¼‰</li>
<li>ä»¥ JSONL æ ¼å¼è¿½åŠ åˆ°æ—¥å¿—æ–‡ä»¶</li>
<li>åœ¨åå°é™é»˜è¿è¡Œ</li>
</ol>
<p><strong>ç¤ºä¾‹æ—¥å¿—æ¡ç›®</strong>ï¼š</p>
<pre><code class="language-jsonl">{&quot;timestamp&quot;:&quot;2026-01-16T14:30:00.000Z&quot;,&quot;action&quot;:&quot;new&quot;,&quot;sessionKey&quot;:&quot;agent:main:main&quot;,&quot;senderId&quot;:&quot;+1234567890&quot;,&quot;source&quot;:&quot;telegram&quot;}
{&quot;timestamp&quot;:&quot;2026-01-16T15:45:22.000Z&quot;,&quot;action&quot;:&quot;stop&quot;,&quot;sessionKey&quot;:&quot;agent:main:main&quot;,&quot;senderId&quot;:&quot;user@example.com&quot;,&quot;source&quot;:&quot;whatsapp&quot;}
</code></pre>
<p><strong>æŸ¥çœ‹æ—¥å¿—</strong>ï¼š</p>
<pre><code class="language-bash"># æŸ¥çœ‹æœ€è¿‘çš„å‘½ä»¤
tail -n 20 ~/.openclaw/logs/commands.log

# ç”¨ jq ç¾åŒ–æ‰“å°
cat ~/.openclaw/logs/commands.log | jq .

# æŒ‰æ“ä½œè¿‡æ»¤
grep &#39;&quot;action&quot;:&quot;new&quot;&#39; ~/.openclaw/logs/commands.log | jq .
</code></pre>
<p><strong>å¯ç”¨</strong>ï¼š</p>
<pre><code class="language-bash">openclaw hooks enable command-logger
</code></pre>
<h3>soul-evil</h3>
<p>åœ¨æ¸…é™¤çª—å£æœŸé—´æˆ–éšæœºæœºä¼šå°†æ³¨å…¥çš„ <code>SOUL.md</code> å†…å®¹æ›¿æ¢ä¸º <code>SOUL_EVIL.md</code>ã€‚</p>
<p><strong>äº‹ä»¶</strong>ï¼š<code>agent:bootstrap</code></p>
<p><strong>æ–‡æ¡£</strong>ï¼š<a href="hooks/soul-evil.html">SOUL Evil é’©å­</a></p>
<p><strong>è¾“å‡º</strong>ï¼šä¸å†™å…¥æ–‡ä»¶ï¼›äº¤æ¢åªåœ¨å†…å­˜ä¸­å‘ç”Ÿã€‚</p>
<p><strong>å¯ç”¨</strong>ï¼š</p>
<pre><code class="language-bash">openclaw hooks enable soul-evil
</code></pre>
<p><strong>é…ç½®</strong>ï¼š</p>
<pre><code class="language-json">{
  &quot;hooks&quot;: {
    &quot;internal&quot;: {
      &quot;enabled&quot;: true,
      &quot;entries&quot;: {
        &quot;soul-evil&quot;: {
          &quot;enabled&quot;: true,
          &quot;file&quot;: &quot;SOUL_EVIL.md&quot;,
          &quot;chance&quot;: 0.1,
          &quot;purge&quot;: { &quot;at&quot;: &quot;21:00&quot;, &quot;duration&quot;: &quot;15m&quot; }
        }
      }
    }
  }
}
</code></pre>
<h3>boot-md</h3>
<p>Gateway å¯åŠ¨æ—¶è¿è¡Œ <code>BOOT.md</code>ï¼ˆé¢‘é“å¯åŠ¨åï¼‰ã€‚<br>å¿…é¡»å¯ç”¨å†…éƒ¨é’©å­æ‰èƒ½è¿è¡Œã€‚</p>
<p><strong>äº‹ä»¶</strong>ï¼š<code>gateway:startup</code></p>
<p><strong>è¦æ±‚</strong>ï¼šå¿…é¡»é…ç½® <code>workspace.dir</code></p>
<p><strong>å®ƒåšä»€ä¹ˆ</strong>ï¼š</p>
<ol>
<li>ä»å·¥ä½œç©ºé—´è¯»å– <code>BOOT.md</code></li>
<li>é€šè¿‡ Agent è¿è¡Œå™¨è¿è¡ŒæŒ‡ä»¤</li>
<li>é€šè¿‡æ¶ˆæ¯å·¥å…·å‘é€ä»»ä½•è¯·æ±‚çš„å‡ºç«™æ¶ˆæ¯</li>
</ol>
<p><strong>å¯ç”¨</strong>ï¼š</p>
<pre><code class="language-bash">openclaw hooks enable boot-md
</code></pre>
<h2>æœ€ä½³å®è·µ</h2>
<h3>ä¿æŒå¤„ç†ç¨‹åºå¿«é€Ÿ</h3>
<p>é’©å­åœ¨å‘½ä»¤å¤„ç†æœŸé—´è¿è¡Œã€‚ä¿æŒè½»é‡ï¼š</p>
<pre><code class="language-typescript">// âœ“ å¥½çš„ - å¼‚æ­¥å·¥ä½œï¼Œç«‹å³è¿”å›
const handler: HookHandler = async (event) =&gt; {
  void processInBackground(event); // å³å‘å³å¼ƒ
};

// âœ— åçš„ - é˜»å¡å‘½ä»¤å¤„ç†
const handler: HookHandler = async (event) =&gt; {
  await slowDatabaseQuery(event);
  await evenSlowerAPICall(event);
};
</code></pre>
<h3>ä¼˜é›…åœ°å¤„ç†é”™è¯¯</h3>
<p>å§‹ç»ˆåŒ…è£…æœ‰é£é™©çš„æ“ä½œï¼š</p>
<pre><code class="language-typescript">const handler: HookHandler = async (event) =&gt; {
  try {
    await riskyOperation(event);
  } catch (err) {
    console.error(&#39;[my-handler] Failed:&#39;, err instanceof Error ? err.message : String(err));
    // ä¸è¦æŠ›å‡º - è®©å…¶ä»–å¤„ç†ç¨‹åºè¿è¡Œ
  }
};
</code></pre>
<h3>å°½æ—©è¿‡æ»¤äº‹ä»¶</h3>
<p>å¦‚æœäº‹ä»¶ä¸ç›¸å…³ï¼Œå°½æ—©è¿”å›ï¼š</p>
<pre><code class="language-typescript">const handler: HookHandler = async (event) =&gt; {
  // åªå¤„ç† &#39;new&#39; å‘½ä»¤
  if (event.type !== &#39;command&#39; || event.action !== &#39;new&#39;) {
    return;
  }

  // ä½ çš„é€»è¾‘åœ¨è¿™é‡Œ
};
</code></pre>
<h3>ä½¿ç”¨ç‰¹å®šçš„äº‹ä»¶é”®</h3>
<p>åœ¨å…ƒæ•°æ®ä¸­å°½å¯èƒ½æŒ‡å®šç¡®åˆ‡çš„äº‹ä»¶ï¼š</p>
<pre><code class="language-yaml">metadata: {&quot;openclaw&quot;:{&quot;events&quot;:[&quot;command:new&quot;]}}  # ç‰¹å®š
</code></pre>
<p>è€Œä¸æ˜¯ï¼š</p>
<pre><code class="language-yaml">metadata: {&quot;openclaw&quot;:{&quot;events&quot;:[&quot;command&quot;]}}      # é€šç”¨ - æ›´å¤šå¼€é”€
</code></pre>
<h2>è°ƒè¯•</h2>
<h3>å¯ç”¨é’©å­æ—¥å¿—</h3>
<p>Gateway åœ¨å¯åŠ¨æ—¶è®°å½•é’©å­åŠ è½½ï¼š</p>
<pre><code>Registered hook: session-memory -&gt; command:new
Registered hook: command-logger -&gt; command
Registered hook: boot-md -&gt; gateway:startup
</code></pre>
<h3>æ£€æŸ¥å‘ç°</h3>
<p>åˆ—å‡ºæ‰€æœ‰å‘ç°çš„é’©å­ï¼š</p>
<pre><code class="language-bash">openclaw hooks list --verbose
</code></pre>
<h3>æ£€æŸ¥æ³¨å†Œ</h3>
<p>åœ¨å¤„ç†ç¨‹åºä¸­ï¼Œè®°å½•ä½•æ—¶è¢«è°ƒç”¨ï¼š</p>
<pre><code class="language-typescript">const handler: HookHandler = async (event) =&gt; {
  console.log(&#39;[my-handler] Triggered:&#39;, event.type, event.action);
  // ä½ çš„é€»è¾‘
};
</code></pre>
<h3>éªŒè¯èµ„æ ¼</h3>
<p>æ£€æŸ¥ä¸ºä»€ä¹ˆé’©å­ä¸åˆæ ¼ï¼š</p>
<pre><code class="language-bash">openclaw hooks info my-hook
</code></pre>
<p>åœ¨è¾“å‡ºä¸­æŸ¥æ‰¾ç¼ºå¤±çš„è¦æ±‚ã€‚</p>
<h2>æµ‹è¯•</h2>
<h3>Gateway æ—¥å¿—</h3>
<p>ç›‘æ§ Gateway æ—¥å¿—æŸ¥çœ‹é’©å­æ‰§è¡Œï¼š</p>
<pre><code class="language-bash"># macOS
./scripts/clawlog.sh -f

# å…¶ä»–å¹³å°
tail -f ~/.openclaw/gateway.log
</code></pre>
<h3>ç›´æ¥æµ‹è¯•é’©å­</h3>
<p>åœ¨éš”ç¦»ä¸­æµ‹è¯•ä½ çš„å¤„ç†ç¨‹åºï¼š</p>
<pre><code class="language-typescript">import { test } from &#39;vitest&#39;;
import { createHookEvent } from &#39;./src/hooks/hooks.js&#39;;
import myHandler from &#39;./hooks/my-hook/handler.js&#39;;

test(&#39;my handler works&#39;, async () =&gt; {
  const event = createHookEvent(&#39;command&#39;, &#39;new&#39;, &#39;test-session&#39;, {
    foo: &#39;bar&#39;
  });

  await myHandler(event);

  // æ–­è¨€å‰¯ä½œç”¨
});
</code></pre>
<h2>æ¶æ„</h2>
<h3>æ ¸å¿ƒç»„ä»¶</h3>
<ul>
<li><strong><code>src/hooks/types.ts</code></strong>ï¼šç±»å‹å®šä¹‰</li>
<li><strong><code>src/hooks/workspace.ts</code></strong>ï¼šç›®å½•æ‰«æå’ŒåŠ è½½</li>
<li><strong><code>src/hooks/frontmatter.ts</code></strong>ï¼šHOOK.md å…ƒæ•°æ®è§£æ</li>
<li><strong><code>src/hooks/config.ts</code></strong>ï¼šèµ„æ ¼æ£€æŸ¥</li>
<li><strong><code>src/hooks/hooks-status.ts</code></strong>ï¼šçŠ¶æ€æŠ¥å‘Š</li>
<li><strong><code>src/hooks/loader.ts</code></strong>ï¼šåŠ¨æ€æ¨¡å—åŠ è½½å™¨</li>
<li><strong><code>src/cli/hooks-cli.ts</code></strong>ï¼šCLI å‘½ä»¤</li>
<li><strong><code>src/gateway/server-startup.ts</code></strong>ï¼šGateway å¯åŠ¨æ—¶åŠ è½½é’©å­</li>
<li><strong><code>src/auto-reply/reply/commands-core.ts</code></strong>ï¼šè§¦å‘å‘½ä»¤äº‹ä»¶</li>
</ul>
<h3>å‘ç°æµç¨‹</h3>
<pre><code>Gateway å¯åŠ¨
    â†“
æ‰«æç›®å½•ï¼ˆå·¥ä½œç©ºé—´ â†’ æ‰˜ç®¡ â†’ æ†ç»‘ï¼‰
    â†“
è§£æ HOOK.md æ–‡ä»¶
    â†“
æ£€æŸ¥èµ„æ ¼ï¼ˆäºŒè¿›åˆ¶æ–‡ä»¶ã€ç¯å¢ƒã€é…ç½®ã€æ“ä½œç³»ç»Ÿï¼‰
    â†“
ä»åˆæ ¼é’©å­åŠ è½½å¤„ç†ç¨‹åº
    â†“
ä¸ºäº‹ä»¶æ³¨å†Œå¤„ç†ç¨‹åº
</code></pre>
<h3>äº‹ä»¶æµç¨‹</h3>
<pre><code>ç”¨æˆ·å‘é€ /new
    â†“
å‘½ä»¤éªŒè¯
    â†“
åˆ›å»ºé’©å­äº‹ä»¶
    â†“
è§¦å‘é’©å­ï¼ˆæ‰€æœ‰æ³¨å†Œçš„å¤„ç†ç¨‹åºï¼‰
    â†“
å‘½ä»¤å¤„ç†ç»§ç»­
    â†“
ä¼šè¯é‡ç½®
</code></pre>
<h2>æ•…éšœæ’é™¤</h2>
<h3>é’©å­æœªè¢«å‘ç°</h3>
<ol>
<li><p>æ£€æŸ¥ç›®å½•ç»“æ„ï¼š</p>
<pre><code class="language-bash">ls -la ~/.openclaw/hooks/my-hook/
# åº”è¯¥æ˜¾ç¤ºï¼šHOOK.md, handler.ts
</code></pre>
</li>
<li><p>éªŒè¯ HOOK.md æ ¼å¼ï¼š</p>
<pre><code class="language-bash">cat ~/.openclaw/hooks/my-hook/HOOK.md
# åº”è¯¥æœ‰å¸¦ name å’Œ metadata çš„ YAML frontmatter
</code></pre>
</li>
<li><p>åˆ—å‡ºæ‰€æœ‰å‘ç°çš„é’©å­ï¼š</p>
<pre><code class="language-bash">openclaw hooks list
</code></pre>
</li>
</ol>
<h3>é’©å­ä¸åˆæ ¼</h3>
<p>æ£€æŸ¥è¦æ±‚ï¼š</p>
<pre><code class="language-bash">openclaw hooks info my-hook
</code></pre>
<p>æŸ¥æ‰¾ç¼ºå¤±çš„ï¼š</p>
<ul>
<li>äºŒè¿›åˆ¶æ–‡ä»¶ï¼ˆæ£€æŸ¥ PATHï¼‰</li>
<li>ç¯å¢ƒå˜é‡</li>
<li>é…ç½®å€¼</li>
<li>æ“ä½œç³»ç»Ÿå…¼å®¹æ€§</li>
</ul>
<h3>é’©å­æœªæ‰§è¡Œ</h3>
<ol>
<li><p>éªŒè¯é’©å­å·²å¯ç”¨ï¼š</p>
<pre><code class="language-bash">openclaw hooks list
# åº”è¯¥æ˜¾ç¤ºå·²å¯ç”¨é’©å­æ—è¾¹çš„ âœ“
</code></pre>
</li>
<li><p>é‡å¯ä½ çš„ Gateway è¿›ç¨‹ï¼Œä»¥ä¾¿é’©å­é‡æ–°åŠ è½½ã€‚</p>
</li>
<li><p>æ£€æŸ¥ Gateway æ—¥å¿—ä¸­çš„é”™è¯¯ï¼š</p>
<pre><code class="language-bash">./scripts/clawlog.sh | grep hook
</code></pre>
</li>
</ol>
<h3>å¤„ç†ç¨‹åºé”™è¯¯</h3>
<p>æ£€æŸ¥ TypeScript/å¯¼å…¥é”™è¯¯ï¼š</p>
<pre><code class="language-bash"># ç›´æ¥æµ‹è¯•å¯¼å…¥
node -e &quot;import(&#39;./path/to/handler.ts&#39;).then(console.log)&quot;
</code></pre>
<h2>è¿ç§»æŒ‡å—</h2>
<h3>ä»æ—§é…ç½®è¿ç§»åˆ°å‘ç°</h3>
<p><strong>ä¹‹å‰</strong>ï¼š</p>
<pre><code class="language-json">{
  &quot;hooks&quot;: {
    &quot;internal&quot;: {
      &quot;enabled&quot;: true,
      &quot;handlers&quot;: [
        {
          &quot;event&quot;: &quot;command:new&quot;,
          &quot;module&quot;: &quot;./hooks/handlers/my-handler.ts&quot;
        }
      ]
    }
  }
}
</code></pre>
<p><strong>ä¹‹å</strong>ï¼š</p>
<ol>
<li><p>åˆ›å»ºé’©å­ç›®å½•ï¼š</p>
<pre><code class="language-bash">mkdir -p ~/.openclaw/hooks/my-hook
mv ./hooks/handlers/my-handler.ts ~/.openclaw/hooks/my-hook/handler.ts
</code></pre>
</li>
<li><p>åˆ›å»º HOOK.mdï¼š</p>
<pre><code class="language-markdown">---
name: my-hook
description: &quot;My custom hook&quot;
metadata: {&quot;openclaw&quot;:{&quot;emoji&quot;:&quot;ğŸ¯&quot;,&quot;events&quot;:[&quot;command:new&quot;]}}
---

# My Hook

åšæœ‰ç”¨çš„äº‹æƒ…ã€‚
</code></pre>
</li>
<li><p>æ›´æ–°é…ç½®ï¼š</p>
<pre><code class="language-json">{
  &quot;hooks&quot;: {
    &quot;internal&quot;: {
      &quot;enabled&quot;: true,
      &quot;entries&quot;: {
        &quot;my-hook&quot;: { &quot;enabled&quot;: true }
      }
    }
  }
}
</code></pre>
</li>
<li><p>éªŒè¯å¹¶é‡å¯ä½ çš„ Gateway è¿›ç¨‹ï¼š</p>
<pre><code class="language-bash">openclaw hooks list
# åº”è¯¥æ˜¾ç¤ºï¼šğŸ¯ my-hook âœ“
</code></pre>
</li>
</ol>
<p><strong>è¿ç§»çš„å¥½å¤„</strong>ï¼š</p>
<ul>
<li>è‡ªåŠ¨å‘ç°</li>
<li>CLI ç®¡ç†</li>
<li>èµ„æ ¼æ£€æŸ¥</li>
<li>æ›´å¥½çš„æ–‡æ¡£</li>
<li>ä¸€è‡´çš„ç»“æ„</li>
</ul>
<h2>å¦è§</h2>
<ul>
<li><a href="cli/hooks.html">CLI å‚è€ƒï¼šhooks</a></li>
<li><a href="https://github.com/openclaw/openclaw/tree/main/src/hooks/bundled">æ†ç»‘é’©å­ README</a></li>
<li><a href="automation/webhook.html">Webhook é’©å­</a></li>
<li><a href="gateway/configuration#hooks.html">é…ç½®</a></li>
</ul>

        </div>
    </main>

    <script src="assets/js/main.js?v=3"></script>
</body>
</html>
