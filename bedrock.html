<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AWS Bedrock - OpenClaw æ–‡æ¡£</title>
    <link rel="stylesheet" href="assets/css/style.css?v=3">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="index.html" class="nav-logo">
                <span class="logo-icon">ğŸ¦</span>
                <span class="logo-text">OpenClaw ä¸­æ–‡æ–‡æ¡£</span>
            </a>
            <button class="nav-toggle" onclick="toggleNav()">â˜°</button>
            <div class="nav-links" id="navLinks">

            <div class="nav-section">
                <span class="nav-section-title">å…¥é—¨æŒ‡å—</span>
                <a href="start/getting-started.html">å¿«é€Ÿå…¥é—¨</a>
                <a href="start/wizard.html">å‘å¯¼</a>
                <a href="start/pairing.html">é…å¯¹</a>
                <a href="start/setup.html">è®¾ç½®</a>
                <a href="start/openclaw.html">OpenClaw åŠ©æ‰‹</a>
                <a href="start/hubs.html">æ–‡æ¡£ä¸­å¿ƒ</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">ç½‘å…³é…ç½®</span>
                <a href="gateway/configuration.html">é…ç½®</a>
                <a href="gateway/configuration-examples.html">é…ç½®ç¤ºä¾‹</a>
                <a href="gateway/security.html">å®‰å…¨</a>
                <a href="gateway/remote.html">è¿œç¨‹è®¿é—®</a>
                <a href="gateway/tailscale.html">Tailscale</a>
                <a href="gateway/multiple-gateways.html">å¤šç½‘å…³</a>
                <a href="gateway/discovery.html">å‘ç°æœºåˆ¶</a>
                <a href="environment.html">ç¯å¢ƒå˜é‡</a>
                <a href="logging.html">æ—¥å¿—é…ç½®</a>
                <a href="network.html">ç½‘ç»œé…ç½®</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">æ¶ˆæ¯æ¸ é“</span>
                <a href="channels/whatsapp.html">WhatsApp</a>
                <a href="channels/telegram.html">Telegram</a>
                <a href="channels/discord.html">Discord</a>
                <a href="channels/mattermost.html">Mattermost</a>
                <a href="channels/imessage.html">iMessage</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">Web ç•Œé¢</span>
                <a href="web/webchat.html">WebChat</a>
                <a href="web/control-ui.html">æ§åˆ¶ç•Œé¢</a>
                <a href="web/dashboard.html">æ§åˆ¶å°</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">æ ¸å¿ƒæ¦‚å¿µ</span>
                <a href="concepts/streaming.html">æµå¼ä¼ è¾“</a>
                <a href="concepts/groups.html">ç¾¤ç»„</a>
                <a href="concepts/group-messages.html">ç¾¤ç»„æ¶ˆæ¯</a>
                <a href="concepts/multi-agent.html">å¤šä»£ç†è·¯ç”±</a>
                <a href="concepts/session.html">ä¼šè¯</a>
                <a href="broadcast-groups.html">å¹¿æ’­ç¾¤ç»„</a>
                <a href="multi-agent-sandbox-tools.html">å¤šä»£ç†æ²™ç›’</a>
                <a href="date-time.html">æ—¥æœŸæ—¶é—´</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">è‡ªåŠ¨åŒ–</span>
                <a href="automation/cron-jobs.html">å®šæ—¶ä»»åŠ¡</a>
                <a href="automation/webhook.html">Webhooks</a>
                <a href="automation/gmail-pubsub.html">Gmail Pub/Sub</a>
                <a href="hooks.html">é’©å­ç³»ç»Ÿ</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å·¥å…·ä¸æŠ€èƒ½</span>
                <a href="tools/slash-commands.html">æ–œæ å‘½ä»¤</a>
                <a href="tools/skills.html">æŠ€èƒ½</a>
                <a href="tools/skills-config.html">æŠ€èƒ½é…ç½®</a>
                <a href="tools/web.html">Web å·¥å…·</a>
                <a href="brave-search.html">Brave æœç´¢</a>
                <a href="perplexity.html">Perplexity</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å®‰è£…ä¸å¹³å°</span>
                <a href="install/updating.html">æ›´æ–°</a>
                <a href="install/nix.html">Nix æ¨¡å¼</a>
                <a href="platforms/macos.html">macOS</a>
                <a href="platforms/ios.html">iOS</a>
                <a href="platforms/android.html">Android</a>
                <a href="platforms/windows.html">Windows (WSL2)</a>
                <a href="platforms/linux.html">Linux</a>
                <a href="northflank.html">Northflank éƒ¨ç½²</a>
                <a href="bedrock.html">AWS Bedrock</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">èŠ‚ç‚¹ä¸åª’ä½“</span>
                <a href="nodes/index.html">èŠ‚ç‚¹</a>
                <a href="nodes/images.html">å›¾ç‰‡</a>
                <a href="nodes/audio.html">éŸ³é¢‘</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">CLI ä¸è°ƒè¯•</span>
                <a href="cli/index.html">CLI å‚è€ƒ</a>
                <a href="debug/node-issue.html">Node é—®é¢˜</a>
                <a href="diagnostics/flags.html">è¯Šæ–­æ ‡å¿—</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å®éªŒæ€§</span>
                <a href="experiments/onboarding-config-protocol.html">é…ç½®åè®®</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å…¶ä»–</span>
                <a href="help.html">å¸®åŠ©</a>
            </div>

            </div>
        </div>
    </nav>

    <div class="overlay" onclick="toggleNav()"></div>

    <main class="main-content">
        <div class="content">
            <h1>AWS Bedrock</h1>
<h1>Amazon Bedrock</h1>
<p>OpenClaw å¯ä»¥é€šè¿‡ pi-ai çš„ <strong>Bedrock Converse</strong> æµå¼æä¾›è€…ä½¿ç”¨ <strong>Amazon Bedrock</strong> æ¨¡å‹ã€‚Bedrock è®¤è¯ä½¿ç”¨ <strong>AWS SDK é»˜è®¤å‡­è¯é“¾</strong>ï¼Œè€Œä¸æ˜¯ API å¯†é’¥ã€‚</p>
<h2>pi-ai æ”¯æŒä»€ä¹ˆ</h2>
<ul>
<li>æä¾›è€…ï¼š<code>amazon-bedrock</code></li>
<li>APIï¼š<code>bedrock-converse-stream</code></li>
<li>è®¤è¯ï¼šAWS å‡­è¯ï¼ˆç¯å¢ƒå˜é‡ã€å…±äº«é…ç½®æˆ–å®ä¾‹è§’è‰²ï¼‰</li>
<li>åŒºåŸŸï¼š<code>AWS_REGION</code> æˆ– <code>AWS_DEFAULT_REGION</code>ï¼ˆé»˜è®¤ï¼š<code>us-east-1</code>ï¼‰</li>
</ul>
<h2>è‡ªåŠ¨æ¨¡å‹å‘ç°</h2>
<p>å¦‚æœæ£€æµ‹åˆ° AWS å‡­è¯ï¼ŒOpenClaw å¯ä»¥è‡ªåŠ¨å‘ç°æ”¯æŒ<strong>æµå¼</strong>å’Œ<strong>æ–‡æœ¬è¾“å‡º</strong>çš„ Bedrock æ¨¡å‹ã€‚å‘ç°ä½¿ç”¨ <code>bedrock:ListFoundationModels</code> å¹¶ç¼“å­˜ï¼ˆé»˜è®¤ï¼š1 å°æ—¶ï¼‰ã€‚</p>
<p>é…ç½®é€‰é¡¹ä½äº <code>models.bedrockDiscovery</code> ä¸‹ï¼š</p>
<pre><code class="language-json5">{
  models: {
    bedrockDiscovery: {
      enabled: true,
      region: &quot;us-east-1&quot;,
      providerFilter: [&quot;anthropic&quot;, &quot;amazon&quot;],
      refreshInterval: 3600,
      defaultContextWindow: 32000,
      defaultMaxTokens: 4096
    }
  }
}
</code></pre>
<p>æ³¨æ„ï¼š</p>
<ul>
<li>å½“å­˜åœ¨ AWS å‡­è¯æ—¶ï¼Œ<code>enabled</code> é»˜è®¤ä¸º <code>true</code></li>
<li><code>region</code> é»˜è®¤ä¸º <code>AWS_REGION</code> æˆ– <code>AWS_DEFAULT_REGION</code>ï¼Œç„¶åæ˜¯ <code>us-east-1</code></li>
<li><code>providerFilter</code> åŒ¹é… Bedrock æä¾›è€…åç§°ï¼ˆä¾‹å¦‚ <code>anthropic</code>ï¼‰</li>
<li><code>refreshInterval</code> æ˜¯ç§’ï¼›è®¾ç½®ä¸º <code>0</code> ç¦ç”¨ç¼“å­˜</li>
<li><code>defaultContextWindow</code>ï¼ˆé»˜è®¤ï¼š<code>32000</code>ï¼‰å’Œ <code>defaultMaxTokens</code>ï¼ˆé»˜è®¤ï¼š<code>4096</code>ï¼‰ç”¨äºå‘ç°çš„æ¨¡å‹ï¼ˆå¦‚æœä½ çŸ¥é“æ¨¡å‹é™åˆ¶å¯ä»¥è¦†ç›–ï¼‰</li>
</ul>
<h2>æ‰‹åŠ¨è®¾ç½®</h2>
<ol>
<li>ç¡®ä¿åœ¨ <strong>Gateway ä¸»æœº</strong>ä¸Šå¯ç”¨ AWS å‡­è¯ï¼š</li>
</ol>
<pre><code class="language-bash">export AWS_ACCESS_KEY_ID=&quot;AKIA...&quot;
export AWS_SECRET_ACCESS_KEY=&quot;...&quot;
export AWS_REGION=&quot;us-east-1&quot;
# å¯é€‰ï¼š
export AWS_SESSION_TOKEN=&quot;...&quot;
export AWS_PROFILE=&quot;your-profile&quot;
# å¯é€‰ï¼ˆBedrock API å¯†é’¥/æŒæœ‰è€…ä»¤ç‰Œï¼‰ï¼š
export AWS_BEARER_TOKEN_BEDROCK=&quot;...&quot;
</code></pre>
<ol start="2">
<li>å‘ä½ çš„é…ç½®æ·»åŠ  Bedrock æä¾›è€…å’Œæ¨¡å‹ï¼ˆä¸éœ€è¦ <code>apiKey</code>ï¼‰ï¼š</li>
</ol>
<pre><code class="language-json5">{
  models: {
    providers: {
      &quot;amazon-bedrock&quot;: {
        baseUrl: &quot;https://bedrock-runtime.us-east-1.amazonaws.com&quot;,
        api: &quot;bedrock-converse-stream&quot;,
        auth: &quot;aws-sdk&quot;,
        models: [
          {
            id: &quot;anthropic.claude-opus-4-5-20251101-v1:0&quot;,
            name: &quot;Claude Opus 4.5 (Bedrock)&quot;,
            reasoning: true,
            input: [&quot;text&quot;, &quot;image&quot;],
            cost: { input: 0, output: 0, cacheRead: 0, cacheWrite: 0 },
            contextWindow: 200000,
            maxTokens: 8192
          }
        ]
      }
    }
  },
  agents: {
    defaults: {
      model: { primary: &quot;amazon-bedrock/anthropic.claude-opus-4-5-20251101-v1:0&quot; }
    }
  }
}
</code></pre>
<h2>EC2 å®ä¾‹è§’è‰²</h2>
<p>åœ¨é™„åŠ äº† IAM è§’è‰²çš„ EC2 å®ä¾‹ä¸Šè¿è¡Œ OpenClaw æ—¶ï¼ŒAWS SDK å°†è‡ªåŠ¨ä½¿ç”¨å®ä¾‹å…ƒæ•°æ®æœåŠ¡ï¼ˆIMDSï¼‰è¿›è¡Œè®¤è¯ã€‚ç„¶è€Œï¼ŒOpenClaw çš„å‡­è¯æ£€æµ‹ç›®å‰ä»…æ£€æŸ¥ç¯å¢ƒå˜é‡ï¼Œè€Œä¸æ˜¯ IMDS å‡­è¯ã€‚</p>
<p><strong>è§£å†³æ–¹æ³•ï¼š</strong> è®¾ç½® <code>AWS_PROFILE=default</code> ä»¥æŒ‡ç¤º AWS å‡­è¯å¯ç”¨ã€‚å®é™…è®¤è¯ä»é€šè¿‡ IMDS ä½¿ç”¨å®ä¾‹è§’è‰²ã€‚</p>
<pre><code class="language-bash"># æ·»åŠ åˆ° ~/.bashrc æˆ–ä½ çš„ shell é…ç½®æ–‡ä»¶
export AWS_PROFILE=default
export AWS_REGION=us-east-1
</code></pre>
<p><strong>EC2 å®ä¾‹è§’è‰²æ‰€éœ€çš„ IAM æƒé™</strong>ï¼š</p>
<ul>
<li><code>bedrock:InvokeModel</code></li>
<li><code>bedrock:InvokeModelWithResponseStream</code></li>
<li><code>bedrock:ListFoundationModels</code>ï¼ˆç”¨äºè‡ªåŠ¨å‘ç°ï¼‰</li>
</ul>
<p>æˆ–é™„åŠ æ‰˜ç®¡ç­–ç•¥ <code>AmazonBedrockFullAccess</code>ã€‚</p>
<p><strong>å¿«é€Ÿè®¾ç½®ï¼š</strong></p>
<pre><code class="language-bash"># 1. åˆ›å»º IAM è§’è‰²å’Œå®ä¾‹é…ç½®æ–‡ä»¶
aws iam create-role --role-name EC2-Bedrock-Access \
  --assume-role-policy-document &#39;{
    &quot;Version&quot;: &quot;2012-10-17&quot;,
    &quot;Statement&quot;: [{
      &quot;Effect&quot;: &quot;Allow&quot;,
      &quot;Principal&quot;: {&quot;Service&quot;: &quot;ec2.amazonaws.com&quot;},
      &quot;Action&quot;: &quot;sts:AssumeRole&quot;
    }]
  }&#39;

aws iam attach-role-policy --role-name EC2-Bedrock-Access \
  --policy-arn arn:aws:iam::aws:policy/AmazonBedrockFullAccess

aws iam create-instance-profile --instance-profile-name EC2-Bedrock-Access
aws iam add-role-to-instance-profile \
  --instance-profile-name EC2-Bedrock-Access \
  --role-name EC2-Bedrock-Access

# 2. é™„åŠ åˆ°ä½ çš„ EC2 å®ä¾‹
aws ec2 associate-iam-instance-profile \
  --instance-id i-xxxxx \
  --iam-instance-profile Name=EC2-Bedrock-Access

# 3. åœ¨ EC2 å®ä¾‹ä¸Šå¯ç”¨å‘ç°
openclaw config set models.bedrockDiscovery.enabled true
openclaw config set models.bedrockDiscovery.region us-east-1

# 4. è®¾ç½®è§£å†³æ–¹æ³•ç¯å¢ƒå˜é‡
echo &#39;export AWS_PROFILE=default&#39; &gt;&gt; ~/.bashrc
echo &#39;export AWS_REGION=us-east-1&#39; &gt;&gt; ~/.bashrc
source ~/.bashrc

# 5. éªŒè¯æ¨¡å‹è¢«å‘ç°
openclaw models list
</code></pre>
<h2>å¤‡æ³¨</h2>
<ul>
<li>Bedrock éœ€è¦åœ¨ AWS è´¦æˆ·/åŒºåŸŸä¸­å¯ç”¨<strong>æ¨¡å‹è®¿é—®</strong></li>
<li>è‡ªåŠ¨å‘ç°éœ€è¦ <code>bedrock:ListFoundationModels</code> æƒé™</li>
<li>å¦‚æœä½¿ç”¨é…ç½®æ–‡ä»¶ï¼Œåœ¨ Gateway ä¸»æœºä¸Šè®¾ç½® <code>AWS_PROFILE</code></li>
<li>OpenClaw æŒ‰æ­¤é¡ºåºæ˜¾ç¤ºå‡­è¯æºï¼š<code>AWS_BEARER_TOKEN_BEDROCK</code>ï¼Œç„¶å <code>AWS_ACCESS_KEY_ID</code> + <code>AWS_SECRET_ACCESS_KEY</code>ï¼Œç„¶å <code>AWS_PROFILE</code>ï¼Œç„¶åæ˜¯é»˜è®¤ AWS SDK é“¾</li>
<li>æ¨ç†æ”¯æŒå–å†³äºæ¨¡å‹ï¼›æŸ¥çœ‹ Bedrock æ¨¡å‹å¡äº†è§£å½“å‰åŠŸèƒ½</li>
<li>å¦‚æœä½ æ›´å–œæ¬¢æ‰˜ç®¡å¯†é’¥æµï¼Œä¹Ÿå¯ä»¥åœ¨ Bedrock å‰æ”¾ç½®ä¸€ä¸ª OpenAI å…¼å®¹ä»£ç†ï¼Œå¹¶å°†å…¶é…ç½®ä¸º OpenAI æä¾›è€…</li>
</ul>

        </div>
    </main>

    <script src="assets/js/main.js?v=3"></script>
</body>
</html>
