<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhatsApp - OpenClaw 文档</title>
    <link rel="stylesheet" href="../assets/css/style.css?v=3">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="nav-logo">
                <span class="logo-icon">🦞</span>
                <span class="logo-text">OpenClaw 中文文档</span>
            </a>
            <button class="nav-toggle" onclick="toggleNav()">☰</button>
            <div class="nav-links" id="navLinks">

            <div class="nav-section">
                <span class="nav-section-title">入门指南</span>
                <a href="../start/getting-started.html">快速入门</a>
                <a href="../start/wizard.html">向导</a>
                <a href="../start/pairing.html">配对</a>
                <a href="../start/setup.html">设置</a>
                <a href="../start/openclaw.html">OpenClaw 助手</a>
                <a href="../start/hubs.html">文档中心</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">网关配置</span>
                <a href="../gateway/configuration.html">配置</a>
                <a href="../gateway/configuration-examples.html">配置示例</a>
                <a href="../gateway/security.html">安全</a>
                <a href="../gateway/remote.html">远程访问</a>
                <a href="../gateway/tailscale.html">Tailscale</a>
                <a href="../gateway/multiple-gateways.html">多网关</a>
                <a href="../gateway/discovery.html">发现机制</a>
                <a href="../environment.html">环境变量</a>
                <a href="../logging.html">日志配置</a>
                <a href="../network.html">网络配置</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">消息渠道</span>
                <a href="../channels/whatsapp.html">WhatsApp</a>
                <a href="../channels/telegram.html">Telegram</a>
                <a href="../channels/discord.html">Discord</a>
                <a href="../channels/mattermost.html">Mattermost</a>
                <a href="../channels/imessage.html">iMessage</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">Web 界面</span>
                <a href="../web/webchat.html">WebChat</a>
                <a href="../web/control-ui.html">控制界面</a>
                <a href="../web/dashboard.html">控制台</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">核心概念</span>
                <a href="../concepts/streaming.html">流式传输</a>
                <a href="../concepts/groups.html">群组</a>
                <a href="../concepts/group-messages.html">群组消息</a>
                <a href="../concepts/multi-agent.html">多代理路由</a>
                <a href="../concepts/session.html">会话</a>
                <a href="../broadcast-groups.html">广播群组</a>
                <a href="../multi-agent-sandbox-tools.html">多代理沙盒</a>
                <a href="../date-time.html">日期时间</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">自动化</span>
                <a href="../automation/cron-jobs.html">定时任务</a>
                <a href="../automation/webhook.html">Webhooks</a>
                <a href="../automation/gmail-pubsub.html">Gmail Pub/Sub</a>
                <a href="../hooks.html">钩子系统</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">工具与技能</span>
                <a href="../tools/slash-commands.html">斜杠命令</a>
                <a href="../tools/skills.html">技能</a>
                <a href="../tools/skills-config.html">技能配置</a>
                <a href="../tools/web.html">Web 工具</a>
                <a href="../brave-search.html">Brave 搜索</a>
                <a href="../perplexity.html">Perplexity</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">安装与平台</span>
                <a href="../install/updating.html">更新</a>
                <a href="../install/nix.html">Nix 模式</a>
                <a href="../platforms/macos.html">macOS</a>
                <a href="../platforms/ios.html">iOS</a>
                <a href="../platforms/android.html">Android</a>
                <a href="../platforms/windows.html">Windows (WSL2)</a>
                <a href="../platforms/linux.html">Linux</a>
                <a href="../northflank.html">Northflank 部署</a>
                <a href="../bedrock.html">AWS Bedrock</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">节点与媒体</span>
                <a href="../nodes/index.html">节点</a>
                <a href="../nodes/images.html">图片</a>
                <a href="../nodes/audio.html">音频</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">CLI 与调试</span>
                <a href="../cli/index.html">CLI 参考</a>
                <a href="../debug/node-issue.html">Node 问题</a>
                <a href="../diagnostics/flags.html">诊断标志</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">实验性</span>
                <a href="../experiments/onboarding-config-protocol.html">配置协议</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">其他</span>
                <a href="../help.html">帮助</a>
            </div>

            </div>
        </div>
    </nav>

    <div class="overlay" onclick="toggleNav()"></div>

    <main class="main-content">
        <div class="content">
            <h1>WhatsApp</h1>
<h1>WhatsApp（网页频道）</h1>
<p>状态：仅通过 Baileys 使用 WhatsApp Web。Gateway 拥有会话。</p>
<h2>快速设置（初学者）</h2>
<ol>
<li>如果可能，使用<strong>单独的电话号码</strong>（推荐）。</li>
<li>在 <code>~/.openclaw/openclaw.json</code> 中配置 WhatsApp。</li>
<li>运行 <code>openclaw channels login</code> 扫描二维码（已关联设备）。</li>
<li>启动 Gateway。</li>
</ol>
<p>最小配置：</p>
<pre><code class="language-json5">{
  channels: {
    whatsapp: {
      dmPolicy: &quot;allowlist&quot;,
      allowFrom: [&quot;+15551234567&quot;]
    }
  }
}
</code></pre>
<h2>目标</h2>
<ul>
<li>在一个 Gateway 进程中支持多个 WhatsApp 账户（多账户）。</li>
<li>确定性路由：回复返回到 WhatsApp，无需模型路由。</li>
<li>模型看到足够的上下文来理解引用回复。</li>
</ul>
<h2>配置写入</h2>
<p>默认情况下，WhatsApp 允许写入由 <code>/config set|unset</code> 触发的配置更新（需要 <code>commands.config: true</code>）。</p>
<p>禁用：</p>
<pre><code class="language-json5">{
  channels: { whatsapp: { configWrites: false } }
}
</code></pre>
<h2>架构（谁拥有什么）</h2>
<ul>
<li><strong>Gateway</strong> 拥有 Baileys 套接字和收件箱循环。</li>
<li><strong>CLI / macOS 应用</strong> 与 Gateway 通信；不直接使用 Baileys。</li>
<li><strong>活动监听器</strong> 是出站发送必需的；否则发送快速失败。</li>
</ul>
<h2>获取电话号码（两种模式）</h2>
<p>WhatsApp 需要真实的手机号码进行验证。VoIP 和虚拟号码通常被阻止。有两种支持的方式在 WhatsApp 上运行 OpenClaw：</p>
<h3>专用号码（推荐）</h3>
<p>为 OpenClaw 使用<strong>单独的电话号码</strong>。最佳用户体验、清晰路由、无自聊问题。理想设置：<strong>备用/旧 Android 手机 + eSIM</strong>。保持 Wi-Fi 和电源连接，并通过 QR 链接。</p>
<p><strong>WhatsApp Business：</strong> 你可以在同一设备上使用不同的号码运行 WhatsApp Business。非常适合保持个人 WhatsApp 分开 —— 安装 WhatsApp Business 并在那里注册 OpenClaw 号码。</p>
<p><strong>示例配置（专用号码，单用户白名单）：</strong></p>
<pre><code class="language-json5">{
  channels: {
    whatsapp: {
      dmPolicy: &quot;allowlist&quot;,
      allowFrom: [&quot;+15551234567&quot;]
    }
  }
}
</code></pre>
<p><strong>配对模式（可选）：</strong><br>如果你想要配对而不是白名单，将 <code>channels.whatsapp.dmPolicy</code> 设置为 <code>pairing</code>。未知发送者获得配对码；批准使用：<br><code>openclaw pairing approve whatsapp &lt;code&gt;</code></p>
<h3>个人号码（备用）</h3>
<p>快速备用：在<strong>你自己的号码</strong>上运行 OpenClaw。给自己发消息（WhatsApp &quot;给自己发消息&quot;）进行测试，这样不会骚扰联系人。预计在设置和实验期间在主手机上读取验证码。<strong>必须启用自聊模式。</strong><br>当向导询问你的个人 WhatsApp 号码时，输入你将从中发送消息的 phone（所有者/发送者），而不是助手号码。</p>
<p><strong>示例配置（个人号码，自聊）：</strong></p>
<pre><code class="language-json">{
</code></pre>

        </div>
    </main>

    <script src="../assets/js/main.js?v=3"></script>
</body>
</html>
