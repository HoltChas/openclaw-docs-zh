<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tailscale - OpenClaw æ–‡æ¡£</title>
    <link rel="stylesheet" href="../assets/css/style.css?v=3">
</head>
<body>
    <nav class="navbar">
        <div class="nav-container">
            <a href="../index.html" class="nav-logo">
                <span class="logo-icon">ğŸ¦</span>
                <span class="logo-text">OpenClaw ä¸­æ–‡æ–‡æ¡£</span>
            </a>
            <button class="nav-toggle" onclick="toggleNav()">â˜°</button>
            <div class="nav-links" id="navLinks">

            <div class="nav-section">
                <span class="nav-section-title">å…¥é—¨æŒ‡å—</span>
                <a href="../start/getting-started.html">å¿«é€Ÿå…¥é—¨</a>
                <a href="../start/wizard.html">å‘å¯¼</a>
                <a href="../start/pairing.html">é…å¯¹</a>
                <a href="../start/setup.html">è®¾ç½®</a>
                <a href="../start/openclaw.html">OpenClaw åŠ©æ‰‹</a>
                <a href="../start/hubs.html">æ–‡æ¡£ä¸­å¿ƒ</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">ç½‘å…³é…ç½®</span>
                <a href="../gateway/configuration.html">é…ç½®</a>
                <a href="../gateway/configuration-examples.html">é…ç½®ç¤ºä¾‹</a>
                <a href="../gateway/security.html">å®‰å…¨</a>
                <a href="../gateway/remote.html">è¿œç¨‹è®¿é—®</a>
                <a href="../gateway/tailscale.html">Tailscale</a>
                <a href="../gateway/multiple-gateways.html">å¤šç½‘å…³</a>
                <a href="../gateway/discovery.html">å‘ç°æœºåˆ¶</a>
                <a href="../environment.html">ç¯å¢ƒå˜é‡</a>
                <a href="../logging.html">æ—¥å¿—é…ç½®</a>
                <a href="../network.html">ç½‘ç»œé…ç½®</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">æ¶ˆæ¯æ¸ é“</span>
                <a href="../channels/whatsapp.html">WhatsApp</a>
                <a href="../channels/telegram.html">Telegram</a>
                <a href="../channels/discord.html">Discord</a>
                <a href="../channels/mattermost.html">Mattermost</a>
                <a href="../channels/imessage.html">iMessage</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">Web ç•Œé¢</span>
                <a href="../web/webchat.html">WebChat</a>
                <a href="../web/control-ui.html">æ§åˆ¶ç•Œé¢</a>
                <a href="../web/dashboard.html">æ§åˆ¶å°</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">æ ¸å¿ƒæ¦‚å¿µ</span>
                <a href="../concepts/streaming.html">æµå¼ä¼ è¾“</a>
                <a href="../concepts/groups.html">ç¾¤ç»„</a>
                <a href="../concepts/group-messages.html">ç¾¤ç»„æ¶ˆæ¯</a>
                <a href="../concepts/multi-agent.html">å¤šä»£ç†è·¯ç”±</a>
                <a href="../concepts/session.html">ä¼šè¯</a>
                <a href="../broadcast-groups.html">å¹¿æ’­ç¾¤ç»„</a>
                <a href="../multi-agent-sandbox-tools.html">å¤šä»£ç†æ²™ç›’</a>
                <a href="../date-time.html">æ—¥æœŸæ—¶é—´</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">è‡ªåŠ¨åŒ–</span>
                <a href="../automation/cron-jobs.html">å®šæ—¶ä»»åŠ¡</a>
                <a href="../automation/webhook.html">Webhooks</a>
                <a href="../automation/gmail-pubsub.html">Gmail Pub/Sub</a>
                <a href="../hooks.html">é’©å­ç³»ç»Ÿ</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å·¥å…·ä¸æŠ€èƒ½</span>
                <a href="../tools/slash-commands.html">æ–œæ å‘½ä»¤</a>
                <a href="../tools/skills.html">æŠ€èƒ½</a>
                <a href="../tools/skills-config.html">æŠ€èƒ½é…ç½®</a>
                <a href="../tools/web.html">Web å·¥å…·</a>
                <a href="../brave-search.html">Brave æœç´¢</a>
                <a href="../perplexity.html">Perplexity</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å®‰è£…ä¸å¹³å°</span>
                <a href="../install/updating.html">æ›´æ–°</a>
                <a href="../install/nix.html">Nix æ¨¡å¼</a>
                <a href="../platforms/macos.html">macOS</a>
                <a href="../platforms/ios.html">iOS</a>
                <a href="../platforms/android.html">Android</a>
                <a href="../platforms/windows.html">Windows (WSL2)</a>
                <a href="../platforms/linux.html">Linux</a>
                <a href="../northflank.html">Northflank éƒ¨ç½²</a>
                <a href="../bedrock.html">AWS Bedrock</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">èŠ‚ç‚¹ä¸åª’ä½“</span>
                <a href="../nodes/index.html">èŠ‚ç‚¹</a>
                <a href="../nodes/images.html">å›¾ç‰‡</a>
                <a href="../nodes/audio.html">éŸ³é¢‘</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">CLI ä¸è°ƒè¯•</span>
                <a href="../cli/index.html">CLI å‚è€ƒ</a>
                <a href="../debug/node-issue.html">Node é—®é¢˜</a>
                <a href="../diagnostics/flags.html">è¯Šæ–­æ ‡å¿—</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å®éªŒæ€§</span>
                <a href="../experiments/onboarding-config-protocol.html">é…ç½®åè®®</a>
            </div>
            <div class="nav-section">
                <span class="nav-section-title">å…¶ä»–</span>
                <a href="../help.html">å¸®åŠ©</a>
            </div>

            </div>
        </div>
    </nav>

    <div class="overlay" onclick="toggleNav()"></div>

    <main class="main-content">
        <div class="content">
            <h1>Tailscale</h1>
<h1>Tailscaleï¼ˆGateway æ§åˆ¶å°ï¼‰</h1>
<p>OpenClaw å¯ä»¥è‡ªåŠ¨é…ç½® Tailscale <strong>Serve</strong>ï¼ˆtailnetï¼‰æˆ– <strong>Funnel</strong>ï¼ˆå…¬å…±ï¼‰ç”¨äº Gateway æ§åˆ¶å°å’Œ WebSocket ç«¯å£ã€‚<br>è¿™æ · Gateway å¯ä»¥ç»§ç»­ç»‘å®š loopbackï¼Œè€Œç”± Tailscale æä¾› HTTPSã€è·¯ç”±ä»¥åŠï¼ˆServe ä¸‹ï¼‰èº«ä»½ headerã€‚</p>
<h2>æ¨¡å¼</h2>
<ul>
<li><code>serve</code>ï¼šä½¿ç”¨ <code>tailscale serve</code> çš„ tailnet å†… Serveã€‚Gateway ä»ç»‘å®š <code>127.0.0.1</code>ã€‚</li>
<li><code>funnel</code>ï¼šä½¿ç”¨ <code>tailscale funnel</code> çš„å…¬å…± HTTPSã€‚OpenClaw è¦æ±‚å…±äº«å¯†ç ã€‚</li>
<li><code>off</code>ï¼šé»˜è®¤ï¼ˆä¸è‡ªåŠ¨é…ç½® Tailscaleï¼‰ã€‚</li>
</ul>
<h2>è®¤è¯</h2>
<p>è®¾ç½® <code>gateway.auth.mode</code> æ§åˆ¶æ¡æ‰‹ï¼š</p>
<ul>
<li><code>token</code>ï¼ˆå½“è®¾ç½®äº† <code>OPENCLAW_GATEWAY_TOKEN</code> æ—¶é»˜è®¤ï¼‰</li>
<li><code>password</code>ï¼ˆé€šè¿‡ <code>OPENCLAW_GATEWAY_PASSWORD</code> æˆ–é…ç½®å…±äº«å¯†é’¥ï¼‰</li>
</ul>
<p>å½“ <code>tailscale.mode = &quot;serve&quot;</code> ä¸” <code>gateway.auth.allowTailscale</code> ä¸º <code>true</code> æ—¶ï¼Œ<br>æœ‰æ•ˆçš„ Serve ä»£ç†è¯·æ±‚å¯é€šè¿‡ Tailscale èº«ä»½ header<br>ï¼ˆ<code>tailscale-user-login</code>ï¼‰è¿›è¡Œè®¤è¯ï¼Œè€Œæ— éœ€ token/å¯†ç ã€‚OpenClaw ä¼šé€šè¿‡æœ¬åœ° Tailscale<br>å®ˆæŠ¤è¿›ç¨‹ï¼ˆ<code>tailscale whois</code>ï¼‰è§£æ <code>x-forwarded-for</code> åœ°å€å¹¶ä¸ header åŒ¹é…ï¼Œç¡®è®¤èº«ä»½åæ¥å—ã€‚<br>OpenClaw åªåœ¨è¯·æ±‚æ¥è‡ª loopback ä¸”åŒ…å« Tailscale çš„ <code>x-forwarded-for</code>ã€<code>x-forwarded-proto</code>ã€<code>x-forwarded-host</code> æ—¶è§†ä¸º Serveã€‚<br>è¦å¼ºåˆ¶æ˜¾å¼å‡­è¯ï¼Œè®¾ç½® <code>gateway.auth.allowTailscale: false</code> æˆ–å¼ºåˆ¶ <code>gateway.auth.mode: &quot;password&quot;</code>ã€‚</p>
<h2>é…ç½®ç¤ºä¾‹</h2>
<h3>ä»… tailnetï¼ˆServeï¼‰</h3>
<pre><code class="language-json5">{
  gateway: {
    bind: &quot;loopback&quot;, // ä¸­æ–‡æ³¨é‡Šï¼šGateway ä»åªç›‘å¬æœ¬åœ°
    tailscale: { mode: &quot;serve&quot; }
  }
}
</code></pre>
<p>è®¿é—®ï¼š<code>https://&lt;magicdns&gt;/</code>ï¼ˆæˆ–ä½ è®¾ç½®çš„ <code>gateway.controlUi.basePath</code>ï¼‰</p>
<h3>ä»… tailnetï¼ˆç»‘å®š Tailnet IPï¼‰</h3>
<p>å½“ä½ æƒ³è®© Gateway ç›´æ¥ç›‘å¬ Tailnet IPï¼ˆæ— éœ€ Serve/Funnelï¼‰æ—¶ä½¿ç”¨ï¼š</p>
<pre><code class="language-json5">{
  gateway: {
    bind: &quot;tailnet&quot;,
    auth: { mode: &quot;token&quot;, token: &quot;your-token&quot; }
  }
}
</code></pre>
<p>ä»å¦ä¸€å° Tailnet è®¾å¤‡è¿æ¥ï¼š</p>
<ul>
<li>æ§åˆ¶å°ï¼š<code>http://&lt;tailscale-ip&gt;:18789/</code></li>
<li>WebSocketï¼š<code>ws://&lt;tailscale-ip&gt;:18789</code></li>
</ul>
<p>æ³¨æ„ï¼šloopbackï¼ˆ<code>http://127.0.0.1:18789</code>ï¼‰åœ¨æ­¤æ¨¡å¼ä¸‹ <strong>ä¸å¯ç”¨</strong>ã€‚</p>
<h3>å…¬ç½‘ï¼ˆFunnel + å…±äº«å¯†ç ï¼‰</h3>
<pre><code class="language-json5">{
  gateway: {
    bind: &quot;loopback&quot;,
    tailscale: { mode: &quot;funnel&quot; },
    auth: { mode: &quot;password&quot;, password: &quot;replace-me&quot; }
  }
}
</code></pre>
<p>å»ºè®®ä½¿ç”¨ <code>OPENCLAW_GATEWAY_PASSWORD</code>ï¼Œä¸è¦æŠŠå¯†ç å†™è¿›ç£ç›˜ã€‚</p>
<h2>CLI ç¤ºä¾‹</h2>
<pre><code class="language-bash">openclaw gateway --tailscale serve # ä¸­æ–‡æ³¨é‡Šï¼šä½¿ç”¨ Tailnet Serve
openclaw gateway --tailscale funnel --auth password # ä¸­æ–‡æ³¨é‡Šï¼šä½¿ç”¨ Funnel + å¯†ç è®¤è¯
</code></pre>
<h2>è¯´æ˜</h2>
<ul>
<li>Tailscale Serve/Funnel éœ€è¦å®‰è£…å¹¶ç™»å½• <code>tailscale</code> CLIã€‚</li>
<li><code>tailscale.mode: &quot;funnel&quot;</code> ä¼šæ‹’ç»å¯åŠ¨ï¼Œé™¤éè®¤è¯æ¨¡å¼æ˜¯ <code>password</code>ï¼Œä»¥é¿å…å…¬å¼€æš´éœ²ã€‚</li>
<li>è®¾ç½® <code>gateway.tailscale.resetOnExit</code> è®© OpenClaw åœ¨å…³é—­æ—¶æ’¤é”€ <code>tailscale serve</code><br>æˆ– <code>tailscale funnel</code> é…ç½®ã€‚</li>
<li><code>gateway.bind: &quot;tailnet&quot;</code> æ˜¯ç›´æ¥ç»‘å®š Tailnetï¼ˆæ—  HTTPSã€æ—  Serve/Funnelï¼‰ã€‚</li>
<li><code>gateway.bind: &quot;auto&quot;</code> ä¼˜å…ˆ loopbackï¼›è‹¥æƒ³ä»… tailnetï¼Œè¯·ç”¨ <code>tailnet</code>ã€‚</li>
<li>Serve/Funnel åªæš´éœ² <strong>Gateway æ§åˆ¶å° + WS</strong>ã€‚èŠ‚ç‚¹è¿æ¥ä¹Ÿä½¿ç”¨åŒä¸€ WS ç«¯ç‚¹ï¼Œå› æ­¤ Serve å¯ç”¨äºèŠ‚ç‚¹è®¿é—®ã€‚</li>
</ul>
<h2>æµè§ˆå™¨æ§åˆ¶ï¼ˆè¿œç¨‹ Gateway + æœ¬åœ°æµè§ˆå™¨ï¼‰</h2>
<p>å¦‚æœ Gateway åœ¨ä¸€å°æœºå™¨ä¸Šè¿è¡Œï¼Œä½†ä½ æƒ³åœ¨å¦ä¸€å°æœºå™¨ä¸Šæ§åˆ¶æµè§ˆå™¨ï¼Œ<br>åœ¨æµè§ˆå™¨æœºå™¨ä¸Šè¿è¡Œ <strong>èŠ‚ç‚¹ä¸»æœº</strong> å¹¶ä¿æŒä¸¤å°è®¾å¤‡åœ¨åŒä¸€ tailnetã€‚<br>Gateway ä¼šæŠŠæµè§ˆå™¨åŠ¨ä½œä»£ç†åˆ°èŠ‚ç‚¹ï¼›ä¸éœ€è¦å•ç‹¬çš„æ§åˆ¶æœåŠ¡å™¨æˆ– Serve URLã€‚</p>
<p>é¿å…å¯¹æµè§ˆå™¨æ§åˆ¶ä½¿ç”¨ Funnelï¼›æŠŠèŠ‚ç‚¹é…å¯¹å½“ä½œæ“ä½œå‘˜è®¿é—®ã€‚</p>
<h2>Tailscale å‰ç½®æ¡ä»¶ + é™åˆ¶</h2>
<ul>
<li>Serve éœ€è¦ Tailnet å¯ç”¨ HTTPSï¼›CLI ä¼šåœ¨ç¼ºå¤±æ—¶æç¤ºã€‚</li>
<li>Serve æ³¨å…¥ Tailscale èº«ä»½ headerï¼›Funnel ä¸æ³¨å…¥ã€‚</li>
<li>Funnel éœ€è¦ Tailscale v1.38.3+ã€MagicDNSã€å¯ç”¨ HTTPSã€ä»¥åŠ funnel èŠ‚ç‚¹å±æ€§ã€‚</li>
<li>Funnel ä»…æ”¯æŒ <code>443</code>ã€<code>8443</code>ã€<code>10000</code> ç«¯å£çš„ TLSã€‚</li>
<li>macOS ä¸Š Funnel éœ€è¦å¼€æºç‰ˆæœ¬çš„ Tailscale åº”ç”¨ã€‚</li>
</ul>
<h2>äº†è§£æ›´å¤š</h2>
<ul>
<li>Tailscale Serve æ¦‚è§ˆï¼š<a href="https://tailscale.com/kb/1312/serve">https://tailscale.com/kb/1312/serve</a></li>
<li><code>tailscale serve</code> å‘½ä»¤ï¼š<a href="https://tailscale.com/kb/1242/tailscale-serve">https://tailscale.com/kb/1242/tailscale-serve</a></li>
<li>Tailscale Funnel æ¦‚è§ˆï¼š<a href="https://tailscale.com/kb/1223/tailscale-funnel">https://tailscale.com/kb/1223/tailscale-funnel</a></li>
<li><code>tailscale funnel</code> å‘½ä»¤ï¼š<a href="https://tailscale.com/kb/1311/tailscale-funnel">https://tailscale.com/kb/1311/tailscale-funnel</a></li>
</ul>

        </div>
    </main>

    <script src="../assets/js/main.js?v=3"></script>
</body>
</html>
